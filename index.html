<html>
	<head>

	</head>
	<body>
		<button onclick="facebookLogin();">Login with Facebook</button><br>
		<button onclick="googleLogin();">Login with Google</button><br>
		<script type="text/javascript">
			var apiBaseUrl = 'http://localhost:3000';
			var popup = null;
			
			function facebookLogin() {
				authWindow(apiBaseUrl + '/auth/facebook');
			}

			function googleLogin() {
				authWindow(apiBaseUrl + '/auth/google');
			}

			function authWindow(authUrl) {
				popup = window.open(authUrl, 'authenticate', 'width=600,height=450');
				return false;
			}

			window.addEventListener('message',function(event) {
				if (event.origin !== apiBaseUrl) return;
				console.log('message received: ' + event.data, event);
				popup.close();
				alert('token = ' + event.data);
			}, false);

		</script>
	</body>

</html>