!function(n){try{n=angular.module("appoints-client-templates")}catch(e){n=angular.module("appoints-client-templates",[])}n.run(["$templateCache",function(n){n.put("auth/login.html",'<h2>Login</h2><p>Appoints doesn\'t store user credentials such as usernames and passwords. It\'s required to use one of the providers below.</p><p><a href="" ng-click="loginFacebook()">Login with Facebook</a><br><a href="" ng-click="loginGoogle()">Login with Google</a></p>')}])}(),function(n){try{n=angular.module("appoints-client-templates")}catch(e){n=angular.module("appoints-client-templates",[])}n.run(["$templateCache",function(n){n.put("home/home.html","<h2>Appointment scheduler app version {{version}}</h2>")}])}(),angular.module("appoints.usersession",[]).factory("usersession",["$rootScope","$http","$window","config","flash",function(n,e,o,t,i){function a(){return angular.copy(u,this)}function r(){return c}function l(n){return o.localStorage.setItem("access_token",n),e({method:"GET",url:t.defaultApiEndpoint+"/me"}).then(function(n){c.isAuthenticated=!0,c.userId=n.userId,c.displayName=n.displayName,c.roles=n.roles},function(n){i.add(n.message,"error")})}function s(){o.localStorage.removeItem("access_token"),c=new a}var u={userId:"",displayName:"",isAuthenticated:!1,roles:[]},c=new a;return{current:r,login:l,logout:s}}]),angular.module("appoints.config",[]).constant("config",{version:"0.1.0",defaultApiEndpoint:"http://localhost:3000"}),angular.module("appoints.flash",[]).factory("flash",["$rootScope",function(n){function e(e,o){o=o||"info";var t={message:e,level:o};a.push(t),n.$broadcast("event:flash.add",t)}function o(){return a}function t(){var n=angular.copy(a);return i(),n}function i(){n.$broadcast("event:flash.clear",!0),a=[]}var a=[];return{add:e,all:o,clear:i,allClear:t}}]),angular.module("appoints.login",["appoints.config","appoints.usersession","ngRoute"]).config(["$routeProvider",function(n){n.when("/login",{templateUrl:"auth/login.html",controller:"LoginCtrl",title:"Login"})}]).controller("LoginCtrl",["$scope","$window","config","usersession",function(n,e,o,t){function i(n){return a=e.open(n,"authenticate","width=600,height=450"),!1}var a;n.loginFacebook=function(){return i(o.defaultApiEndpoint+"/auth/facebook")},n.loginGoogle=function(){return i(o.defaultApiEndpoint+"/auth/google")},e.addEventListener("message",function(n){n.origin===o.defaultApiEndpoint&&t.login(n.data).then(function(){a.close()})},!1)}]),angular.module("appoints.home",["appoints.config","ngRoute"]).config(["$routeProvider",function(n){n.when("/",{templateUrl:"home/home.html",controller:"HomeCtrl",title:"Home"})}]).controller("HomeCtrl",["$scope","config",function(n,e){n.version=e.version}]),angular.module("appoints",["ngRoute","appoints.flash","appoints.usersession","appoints.home","appoints.login","appoints-client-templates"]).config(["$httpProvider",function(n){n.defaults.useXDomain=!0,delete n.defaults.headers.common["X-Requested-With"]}]).controller("AppCtrl",["$scope","$location","usersession",function(n,e,o){var t="Appoints";n.pageTitle=t,n.$on("$routeChangeSuccess",function(e,o){n.pageTitle=o.title||t}),n.user=o.current(),n.routeIs=function(n){return e.path()===n},n.logout=function(){o.logout(function(){e.url("/")})},n.$on("event:currentSessionChanged",function(e,o){n.user=o})}]);